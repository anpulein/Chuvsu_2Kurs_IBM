Turbo Assembler	 Version 4.1	    11/16/22 11:41:21	    Page 1
code.asm



      1					  ;‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì
      2					 ‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì
      3					  ;‚ñì‚ñì						       ‚ñì‚ñì
      4					  ;‚ñì‚ñì										    +
      5					 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î
      6					 Ä‚îÄ‚îÄ‚îÄ‚îê		‚ñì‚ñì
      7					  ;‚ñì‚ñì	  ‚îÇ –ü –† –û –ì –† –ê	–ú –ú –ê   L O C K E R ‚îÇ	    ‚ñì‚ñì
      8					  ;‚ñì‚ñì										    +
      9					 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î
     10					 Ä‚îÄ‚îÄ‚îÄ‚îò		‚ñì‚ñì
     11					  ;‚ñì‚ñì						       ‚ñì‚ñì
     12					  ;‚ñì‚ñì –≠—Ç–æ —Ä–µ–∑–∏–¥–µ–Ω—Ç–Ω–∞—è	–ø—Ä–æ–≥—Ä–∞–º–º–∞ COM —Ç–∏–ø–∞,		    +
     13					 –∑–∞–ø–∏—Ä–∞—é—â–∞—è –Ω–∞    ‚ñì‚ñì
     14					  ;‚ñì‚ñì –≤—Ä–µ–º—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É. –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç    +
     15					 –≤–µ–∫—Ç–æ—Ä	  ‚ñì‚ñì
     16					  ;‚ñì‚ñì –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è Int09h –∏ –∑–∞–º–µ–Ω—è–µ—Ç* –≤ —Ä–µ–∑–∏–¥–µ–Ω—Ç–µ 5232	    +
     17					 –±–∞–π—Ç  ‚ñì‚ñì
     18					  ;‚ñì‚ñì						       ‚ñì‚ñì
     19					  ;‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì
     20					 ‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì
     21
     22
     23	    0000			  PROGRAM   segment
     24					      assume CS:PROGRAM
     25					      org   100h;–ø—Ä–æ–ø—É—Å–∫	PSP –¥–ª—è COM-–ø—Ä–æ–≥—Ä–∞–º–º—ã
     26
     27					 .386
     28
     29	    0100  E9 2715		  Start: jmp InitProc; –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é
     30
     31					  ;–† –ï –ó –ò –î –ï –ù	–¢ –ù –´ –ï   –î –ê –ù –ù –´ –ï
     32		  =00EE			  FuncNum equ 0EEh;–Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è	—Ñ—É–Ω–∫—Ü–∏—è
     33							  ;–ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è	BIOS Int16h
     34		  =2D0C			  CodeOut   equ	  2D0Ch
     35					 ;–∫–æ–¥, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π –Ω–∞—à–∏–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–º Int16h
     36		  =9D0A			  TestInt09 equ	  9D0Ah; —Å–ª–æ–≤–æ –ø–µ—Ä–µ–¥ Int09h
     37		  =3AFA			  TestInt16 equ	  3AFAh; —Å–ª–æ–≤–æ –ø–µ—Ä–µ–¥ Int16h
     38
     39	    0103			  OldInt09  label dword; —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π	–≤–µ–∫—Ç–æ—Ä Int09h:
     40	    0103  ????			   OfsInt09 dw	  ?    ;   –µ–≥–æ —Å–º–µ—â–µ–Ω–∏–µ
     41	    0105  ????			   SegInt09 dw	  ?    ;   –∏ —Å–µ–≥–º–µ–Ω—Ç
     42
     43	    0107			  OldInt16  label dword; —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π	–≤–µ–∫—Ç–æ—Ä Int16h:
     44	    0107  ????			   OfsInt16 dw	  ?    ;   –µ–≥–æ —Å–º–µ—â–µ–Ω–∏–µ
     45	    0109  ????			   SegInt16 dw	  ?    ;   –∏ —Å–µ–≥–º–µ–Ω—Ç
     46
     47	    010B  00			  OK_Text   db	  0    ; –ø—Ä–∏–∑–Ω–∞–∫	–≥–∞—à–µ–Ω–∏—è —ç–∫—Ä–∞–Ω–∞
     48	    010C  ??			  Sign	    db	  ?    ; –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–∂–∞—Ç–∏–π Ctrl
     49		  =0800			  VideoLen  equ	  800h ; –¥–ª–∏–Ω–∞ –≤–∏–¥–µ–æ–±—É—Ñ–µ—Ä–∞
     50
     51	    010D  A0*(20)		 VideoBuf  db	 160 dup(' ')
     52	    01AD  0D*(20)		  db  13 dup(' ')
     53	    01BA  23 23	23 23 23 23 23+	  db '######################################################'
     54		  23 23	23 23 23 23 23+
     55		  23 23	23 23 23 23 23+
     56		  23 23	23 23 23 23 23+
     57		  23 23	23 23 23 23 23+
Turbo Assembler	 Version 4.1	    11/16/22 11:41:21	    Page 2
code.asm



     58		  23 23	23 23 23 23 23+
     59		  23 23	23 23 23 23 23+
     60		  23 23	23 23 23
     61	    01F0  1A*(20)		  db  26 dup(' ')
     62	    020A  23 20	20 20 20 20 20+	  db '#							   #'
     63		  20 20	20 20 20 20 20+
     64		  20 20	20 20 20 20 20+
     65		  20 20	20 20 20 20 20+
     66		  20 20	20 20 20 20 20+
     67		  20 20	20 20 20 20 20+
     68		  20 20	20 20 20 20 20+
     69		  20 20	20 20 23
     70	    0240  1A*(20)		  db  26 dup(' ')
     71	    025A  23 20	20 20 74 6F 20+	  db '#	  to unlock, press the	DMITRY				   #'
     72		  75 6E	6C 6F 63 6B 2C+
     73		  20 70	72 65 73 73 20+
     74		  74 68	65 20 20 44 4D+
     75		  49 54	52 59 20 20 20+
     76		  20 20	20 20 20 20 09+
     77		  09 09	20 20 23
     78	    0289  1A*(20)		  db  26 dup(' ')
     79	    02A3  23 20	20 20 20 20 20+	  db '#							   #'
     80		  20 20	20 20 20 20 20+
     81		  20 20	20 20 20 20 20+
     82		  20 20	20 20 20 20 20+
     83		  20 20	20 20 20 20 20+
     84		  20 20	20 20 20 20 20+
     85		  20 20	20 20 20 20 20+
     86		  20 20	20 20 23
     87	    02D9  1A*(20)		  db  26 dup(' ')
     88	    02F3  23 20	20 20 20 20 20+	  db '#							   #'
     89		  20 20	20 20 20 20 20+
     90		  20 20	20 20 20 20 20+
     91		  20 20	20 20 20 20 20+
     92		  20 20	20 20 20 20 20+
     93		  20 20	20 20 20 20 20+
     94		  20 20	20 20 20 20 20+
     95		  20 20	20 20 23
     96	    0329  1A*(20)		  db  26 dup(' ')
     97	    0343  23 23	23 23 23 23 23+	  db '######################################################'
     98		  23 23	23 23 23 23 23+
     99		  23 23	23 23 23 23 23+
    100		  23 23	23 23 23 23 23+
    101		  23 23	23 23 23 23 23+
    102		  23 23	23 23 23 23 23+
    103		  23 23	23 23 23 23 23+
    104		  23 23	23 23 23
    105	    0379  07D0*(20)		  db  2000 dup(' ')
    106
    107	    0B49  0800*(07)		  AttrBuf db VideoLen dup(07h);	–∞—Ç—Ä–∏–±—É—Ç—ã —ç–∫—Ä–∞–Ω–∞
    108	    1349  B800			  VideoBeg dw 0B800h; –∞–¥—Ä–µ—Å –Ω–∞—á–∞–ª–∞ –≤–∏–¥–µ–æ–æ–±–ª–∞—Å—Ç–∏
    109	    134B  ????			  VideoOffs dw ?; —Å–º–µ—â–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    110	    134D  ????			  CurSize   dw ?;—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π	—Ä–∞–∑–º–µ—Ä –∫—É—Ä—Å–æ—Ä–∞
    111
    112
    113					 ; –† –ï –ó –ò –î –ï –ù	–¢ –ù –´ –ï   –ü –† –û –¶ –ï –î	–£ –† –´
    114					 ;–ü–û–î–ü–†–û–ì–†–ê–ú–ú–ê –û–ë–ú–ï–ù–ê	–í–ò–î–ï–û–û–ë–õ–ê–°–¢–ò –° –ë–£–§–ï–†–û–ú	    +
Turbo Assembler	 Version 4.1	    11/16/22 11:41:21	    Page 3
code.asm



    115					 ;–ü–†–û–ì–†–ê–ú–ú–´
    116
    117	    134F			  VideoXcg proc
    118	    134F  BF 010Dr		   lea DI,VideoBuf; –≤ DI - –∞–¥—Ä–µ—Å –±—É—Ñ–µ—Ä–∞ —Å–∏–º–≤–æ–ª–æ–≤
    119	    1352  BE 0B49r		   lea SI,AttrBuf; –≤ SI - –∞–¥—Ä–µ—Å –±—É—Ñ–µ—Ä–∞ –∞—Ç—Ä–∏–±—É—Ç–æ–≤
    120	    1355  2E: A1 1349r		   mov AX,VideoBeg; –≤ ES - —Å–µ–≥–º–µ–Ω—Ç–Ω—ã–π –∞–¥—Ä–µ—Å
    121	    1359  8E C0			   mov ES,AX; –Ω–∞—á–∞–ª–∞ –≤–∏–¥–µ–æ–æ–±–ª–∞—Å—Ç–∏
    122	    135B  B9 0800		   mov CX,VideoLen; –≤ CX - –¥–ª–∏–Ω–∞ –≤–∏–¥–µ–æ–±—É—Ñ–µ—Ä–∞
    123	    135E  2E: 8B 1E 134Br	   mov BX,VideoOffs; –≤	BX - –Ω–∞—á. —Å–º–µ—â–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏
    124
    125	    1363			   Draw:
    126	    1363  26: 8B 07		   mov AX,ES:[BX]; –æ–±–º–µ–Ω—è—Ç—å —Å–∏–º–≤–æ–ª/–∞—Ç—Ä–∏–±—É—Ç
    127	    1366  86 24			   xchg	AH,DS:[SI]; –Ω–∞ —ç–∫—Ä–∞–Ω–µ —Å —Å–∏–º–≤–æ–ª–æ–º –∏
    128							  ; –∞—Ç—Ä–∏–±—É—Ç–æ–º
    129	    1368  86 05			   xchg	 AL,DS:[DI]; –∏–∑ –±—É—Ñ–µ—Ä–æ–≤
    130	    136A  26: 89 07		   mov	 ES:[BX],AX;
    131
    132	    136D  46			   inc	 SI;‚îê	—É–≤–µ–ª–∏—á–∏—Ç—å –∞–¥—Ä–µ—Å
    133	    136E  47			   inc	 DI;‚îò	–≤ –±—É—Ñ–µ—Ä–∞—Ö
    134
    135	    136F  43			   inc	 BX;‚îê	—É–≤–µ–ª–∏—á–∏—Ç—å –∞–¥—Ä–µ—Å
    136	    1370  43			   inc	 BX;‚îò	–≤ –≤–∏–¥–µ–æ–±—É—Ñ–µ—Ä–µ
    137
    138	    1371  E2 F0			   loop	 Draw; –¥–µ–ª–∞—Ç—å –¥–ª—è –≤—Å–µ–π –≤–∏–¥–µ–æ–æ–±–ª–∞—Å—Ç–∏
    139	    1373  C3			      ret    ;–≤–æ–∑–≤—Ä–∞—Ç
    140	    1374			  VideoXcg endp
    141
    142
    143					 ;–û–ë–†–ê–ë–û–¢–ß–ò–ö –ü–†–ï–†–´–í–ê–ù–ò–Ø Int09h (–ü–†–ï–†–´–í–ê–ù–ò–ï –û–¢
    144					 ; –ö–õ–ê–í–ò–ê–¢–£–†–´)
    145
    146	    1374  9D0A			   dw TestInt09; —Å–ª–æ–≤–æ –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞
    147
    148
    149	    1376			  Int09Hand proc
    150	    1376  50			     push  AX		 ;‚îê
    151	    1377  53			     push  BX		 ;‚îÇ
    152	    1378  51			     push  CX		 ;‚îÇ—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å
    153	    1379  57			     push  DI		 ;‚îÇ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ
    154	    137A  56			     push  SI		 ;‚îÇ—Ä–µ–≥–∏—Å—Ç—Ä—ã
    155	    137B  1E			     push  DS		 ;‚îÇ
    156	    137C  06			     push  ES		 ;‚îò
    157
    158	    137D  0E			     push  CS		 ;‚îê—É–∫–∞–∑–∞—Ç—å DS –Ω–∞
    159	    137E  1F			     pop   DS		 ;‚îò–Ω–∞—à—É –ø—Ä–æ–≥—Ä–∞–º–º—É
    160	    137F  E4 60			     in	AL,60h;	–ø–æ–ª—É—á–∏—Ç—å —Å–∫–∞–Ω –∫–æ–¥ –Ω–∞–∂–∞—Ç–æ–π	–∫–ª–∞–≤–∏—à–∏
    161	    1381  3C 26			     cmp AL,26h; –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ —Å–∫–∞–Ω-–∫–æ–¥ –∫–ª–∞–≤–∏—à–∏
    162	    1383  75 12	90 90		     jne Exit_09; <L> –∏ –≤—ã–π—Ç–∏, –µ—Å–ª–∏ –Ω–µ –æ–Ω
    163	    1387  33 C0			     xor AX,AX	 ;
    164	    1389  8E C0			     mov   ES,AX ; –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–ª–∞–≥–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –Ω–∞
    165	    138B  26: A0 0418		     mov   AL,ES:[418h]; –Ω–∞–∂–∞—Ç–∏–µ	<Shift Right + CapsLock>
    166	    138F  24 41			     and   AL,01000001b	     ; 6 - –±–∞–π—Ç CapsLock
    167	    1391  3C 41			     cmp   AL,01000001b	    ; 0	-–±–∞–π—Ç Shift	Right
    168	    1393  74 05	90 90		     je	   Cont	       ;
    169
    170	    1397			    Exit_09:
    171	    1397  E9 0115		      jmp   Exit09	  ;–≤—ã—Ö–æ–¥
Turbo Assembler	 Version 4.1	    11/16/22 11:41:21	    Page 4
code.asm



    172
    173	    139A			    Cont:
    174	    139A  FB				 sti		     ;—Ä–∞–∑—Ä–µ—à–∏—Ç—å –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è
    175	    139B  B4 0F				 mov   AH,0Fh	     ;‚îê–ø–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π
    176	    139D  CD 10				   int	 10h	     ;‚îò–≤–∏–¥–µ–æ—Ä–µ–∂–∏–º
    177	    139F  3C 02			       cmp   AL,2	   ;‚îê
    178	    13A1  74 10	90 90		       je    InText	   ;‚îÇ–ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ InText
    179	    13A5  3C 03			       cmp   AL,3	   ;‚îÇ–µ—Å–ª–∏	—Ä–µ–∂–∏–º
    180	    13A7  74 0A	90 90		       je    InText	   ;‚îÇ—Ç–µ–∫—Å—Ç–æ–≤—ã–π 80#25
    181	    13AB  3C 07			       cmp   AL,7	   ;‚îÇ
    182	    13AD  74 04	90 90		       je    InText	   ;‚îò
    183
    184	    13B1  EB 2F			       jmp   short SwLoop1 ;–∏–Ω–∞—á–µ - –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å
    185
    186
    187	    13B3			   InText:
    188	    13B3  33 C0			     xor   AX,AX	 ;‚îê—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ–≥–º–µ–Ω—Ç–Ω—ã–π
    189	    13B5  8E C0			     mov   ES,AX	 ;‚îò–∞–¥—Ä–µ—Å	–≤ 0000h
    190
    191	    13B7  26: A1 044E		   mov AX,ES:[44Eh]  ;‚îê–ø–æ–ª—É—á–∏—Ç—å —Å–º–µ—â–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–π
    192	    13BB  2E: A3 134Br		   mov VideoOffs,AX  ;‚îò—Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ VideoOffs
    193
    194	    13BF  26: A1 044C		   mov AX,ES:[44Ch]  ;‚îê—Å—Ä–∞–≤–Ω–∏—Ç—å –¥–ª–∏–Ω—É –≤–∏–¥–µ–æ–±—É—Ñ–µ—Ä–∞
    195	    13C3  3D 1000		   cmp AX,1000h	     ;‚îÇ—Å 1000h.–ï—Å–ª–∏ –Ω–µ	—Ä–∞–≤–Ω–æ,
    196	    13C6  0F 85	00C0		   jne Exit009	     ;‚îÇ—Ç–æ —Ä–µ–∂–∏–º EGA Lines
    197							     ;‚îò(—ç–∫—Ä–∞–Ω —Ç—É—à–∏—Ç—å –Ω–µ –Ω–∞–¥–æ)
    198	    13CA  B4 03			   mov	 AH,03h	       ;‚îê–∏–Ω–∞—á–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å
    199	    13CC  CD 10			   int	 10h	       ;‚îÇ—Ä–∞–∑–º–µ—Ä	–∫—É—Ä—Å–æ—Ä–∞
    200	    13CE  2E: 89 0E 134Dr	   mov	 CurSize,CX    ;‚îò–≤ CurSize
    201
    202	    13D3  B4 01			   mov	 AH,01h	       ;‚îê
    203	    13D5  B5 20			   mov	 CH,20h	       ;‚îÇ–∏ –ø–æ–¥–∞–≤–∏—Ç—å –µ–≥–æ
    204	    13D7  CD 10			   int	 10h	       ;‚îò
    205
    206	    13D9  2E: C6 06 010Br 01	   mov OK_Text,01h; —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–∑–Ω–∞–∫	–≥–∞—à–µ–Ω–∏—è
    207							  ; —ç–∫—Ä–∞–Ω–∞
    208	    13DF  E8 FF6D		   call	 VideoXcg  ;–∏ –≤—ã–∑–≤–∞—Ç—å –ø—Ä–æ—Ü–µ–¥—É—Ä—É –≥–∞—à–µ–Ω–∏—è
    209
    210
    211	    13E2			    SwLoop1:
    212
    213					 ;-----------------------------------D------------------------------------------;
    214	    13E2					 D1:
    215	    13E2  E4 60						 in AL,60h
    216	    13E4  3C 20						 cmp AL,20h ; –°–∫–∞–Ω –∫–æ–¥ –Ω–∞–∂–∞—Ç–∏—è –±—É–∫–≤—ã	D
    217	    13E6  74 04	90 90					 je D2 ; –ï—Å–ª–∏ D –∏–¥–µ–º –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É –æ—Ç–∂–∞—Ç–∏—è
    218	    13EA  EB F6						 jmp D1	; –ï—Å–ª–∏ –Ω–µ	D —Ç–æ –Ω–∞—á–∏–Ω–∞–µ–º	–≤—Å–µ –∑–∞–Ω–æ–≤–æ
    219
    220	    13EC					 D2:
    221	    13EC  E4 60						 in AL,60h
    222	    13EE  3C A0						 cmp AL,0A0h ; –°–∫–∞–Ω	–∫–æ–¥ –æ—Ç–∂–∞—Ç–∏—è –±—É–∫–≤—ã D
    223	    13F0  74 04	90 90					 je M1 ; –ï—Å–ª–∏ D –æ—Ç–∂–∞–ª–∏,—Ç–æ –∏–¥–µ–º –¥–∞–ª—å—à–µ
    224	    13F4  EB F6						 jmp D2	; –ï—Å–ª–∏ –∫–Ω–æ–ø–∫–∞	–µ—â–µ –Ω–µ –æ—Ç–∂–∞—Ç–∞ –∂–¥–µ–º   +
    225					 –æ—Ç–∂–∞—Ç–∏—è
    226
    227					 ;-----------------------------------M------------------------------------------;
    228
Turbo Assembler	 Version 4.1	    11/16/22 11:41:21	    Page 5
code.asm



    229	    13F6					 M1:
    230	    13F6  E4 60						 in AL,60h
    231	    13F8  3C 32						 cmp AL,32h ; –°–∫–∞–Ω –∫–æ–¥ –Ω–∞–∂–∞—Ç–∏—è –±—É–∫–≤—ã	M
    232	    13FA  74 08	90 90					 je M2 ; –ï—Å–ª–∏ M –∏–¥–µ–º –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É –æ—Ç–∂–∞—Ç–∏—è
    233	    13FE  3C A0						 cmp AL, 0A0h ;	–ï—Å–ª–∏ –Ω–µ M	–∏–¥–µ–º –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É	    +
    234					 —Ç–æ–≥–æ —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–∂–∏–º–∞–ª
    235	    1400  74 F4						 je M1
    236	    1402  EB DE						 jmp D1
    237
    238	    1404					 M2:
    239	    1404  E4 60						 in AL,60h
    240	    1406  3C B2						 cmp AL,0B2h ; –°–∫–∞–Ω	–∫–æ–¥ –æ—Ç–∂–∞—Ç–∏—è –±—É–∫–≤—ã M
    241	    1408  74 04	90 90					 je I1 ; –ï—Å–ª–∏ M –æ—Ç–∂–∞–ª–∏,—Ç–æ –∏–¥–µ–º –¥–∞–ª—å—à–µ
    242	    140C  EB F6						 jmp M2	; –ï—Å–ª–∏ –∫–Ω–æ–ø–∫–∞	–µ—â–µ –Ω–µ –æ—Ç–∂–∞—Ç–∞ –∂–¥–µ–º   +
    243					 –æ—Ç–∂–∞—Ç–∏—è
    244
    245					 ;-----------------------------------I------------------------------------------;
    246
    247	    140E					 I1:
    248	    140E  E4 60						 in AL,60h
    249	    1410  3C 17						 cmp AL,17h ; –°–∫–∞–Ω –∫–æ–¥ –Ω–∞–∂–∞—Ç–∏—è –±—É–∫–≤—ã	I
    250	    1412  74 08	90 90					 je I2 ; –ï—Å–ª–∏ I –∏–¥–µ–º –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É –æ—Ç–∂–∞—Ç–∏—è
    251	    1416  3C B2						 cmp AL, 0B2h ;	–ï—Å–ª–∏ –Ω–µ I	–∏–¥–µ–º –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É	    +
    252					 —Ç–æ–≥–æ —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–∂–∏–º–∞–ª
    253	    1418  74 F4						 je I1
    254	    141A  EB DA						 jmp M1
    255
    256	    141C					 I2:
    257	    141C  E4 60						 in AL,60h
    258	    141E  3C 97						 cmp AL,97h ; –°–∫–∞–Ω –∫–æ–¥ –æ—Ç–∂–∞—Ç–∏—è –±—É–∫–≤—ã	I
    259	    1420  74 04	90 90					 je T1 ; –ï—Å–ª–∏ I –æ—Ç–∂–∞–ª–∏,—Ç–æ –∏–¥–µ–º –¥–∞–ª—å—à–µ
    260	    1424  EB F6						 jmp I2	; –ï—Å–ª–∏ –∫–Ω–æ–ø–∫–∞	–µ—â–µ –Ω–µ –æ—Ç–∂–∞—Ç–∞ –∂–¥–µ–º   +
    261					 –æ—Ç–∂–∞—Ç–∏—è
    262
    263					 ;-----------------------------------T------------------------------------------;
    264
    265	    1426					 T1:
    266	    1426  E4 60						 in AL,60h
    267	    1428  3C 14						 cmp AL,14h ; –°–∫–∞–Ω –∫–æ–¥ –Ω–∞–∂–∞—Ç–∏—è –±—É–∫–≤—ã	T
    268	    142A  74 08	90 90					 je T2 ; –ï—Å–ª–∏ T –∏–¥–µ–º –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É –æ—Ç–∂–∞—Ç–∏—è
    269	    142E  3C 97						 cmp AL, 97h ; –ï—Å–ª–∏	–Ω–µ T –∏–¥–µ–º	–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É	    +
    270					 —Ç–æ–≥–æ —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–∂–∏–º–∞–ª
    271	    1430  74 F4						 je T1
    272	    1432  EB DA						 jmp I1
    273
    274	    1434					 T2:
    275	    1434  E4 60						 in AL,60h
    276	    1436  3C 94						 cmp AL,94h ; –°–∫–∞–Ω –∫–æ–¥ –æ—Ç–∂–∞—Ç–∏—è –±—É–∫–≤—ã	T
    277	    1438  74 04	90 90					 je R1 ; –ï—Å–ª–∏ T –æ—Ç–∂–∞–ª–∏,—Ç–æ –∏–¥–µ–º –¥–∞–ª—å—à–µ
    278	    143C  EB F6						 jmp T2	; –ï—Å–ª–∏ –∫–Ω–æ–ø–∫–∞	–µ—â–µ –Ω–µ –æ—Ç–∂–∞—Ç–∞ –∂–¥–µ–º   +
    279					 –æ—Ç–∂–∞—Ç–∏—è
    280
    281					 ;-----------------------------------R------------------------------------------;
    282
    283	    143E					 R1:
    284	    143E  E4 60						 in AL,60h
    285	    1440  3C 13						 cmp AL,13h ; –°–∫–∞–Ω –∫–æ–¥ –Ω–∞–∂–∞—Ç–∏—è –±—É–∫–≤—ã	R
Turbo Assembler	 Version 4.1	    11/16/22 11:41:21	    Page 6
code.asm



    286	    1442  74 08	90 90					 je R2 ; –ï—Å–ª–∏ R –∏–¥–µ–º –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É –æ—Ç–∂–∞—Ç–∏—è
    287	    1446  3C 94						 cmp AL, 94h ; –ï—Å–ª–∏	–Ω–µ R –∏–¥–µ–º	–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É	    +
    288					 —Ç–æ–≥–æ —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–∂–∏–º–∞–ª
    289	    1448  74 F4						 je R1
    290	    144A  EB DA						 jmp T1
    291
    292	    144C					 R2:
    293	    144C  E4 60						 in AL,60h
    294	    144E  3C 93						 cmp AL,93h ; –°–∫–∞–Ω –∫–æ–¥ –æ—Ç–∂–∞—Ç–∏—è –±—É–∫–≤—ã	R
    295	    1450  74 04	90 90					 je Y1 ; –ï—Å–ª–∏ R –æ—Ç–∂–∞–ª–∏,—Ç–æ –∏–¥–µ–º –¥–∞–ª—å—à–µ
    296	    1454  EB F6						 jmp R2	; –ï—Å–ª–∏ –∫–Ω–æ–ø–∫–∞	–µ—â–µ –Ω–µ –æ—Ç–∂–∞—Ç–∞ –∂–¥–µ–º   +
    297					 –æ—Ç–∂–∞—Ç–∏—è
    298
    299					 ;-----------------------------------Y------------------------------------------;
    300
    301	    1456					 Y1:
    302	    1456  E4 60						 in AL,60h
    303	    1458  3C 15						 cmp AL,15h ; –°–∫–∞–Ω –∫–æ–¥ –Ω–∞–∂–∞—Ç–∏—è –±—É–∫–≤—ã	Y
    304	    145A  74 08	90 90					 je Y2 ; –ï—Å–ª–∏ Y –∏–¥–µ–º –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É –æ—Ç–∂–∞—Ç–∏—è
    305	    145E  3C 93						 cmp AL, 93h ; –ï—Å–ª–∏	–Ω–µ Y –∏–¥–µ–º	–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É	    +
    306					 —Ç–æ–≥–æ —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–∂–∏–º–∞–ª
    307	    1460  74 F4						 je Y1
    308	    1462  EB DA						 jmp R1
    309
    310	    1464					 Y2:
    311	    1464  E4 60						 in AL,60h
    312	    1466  3C 95						 cmp AL,95h ; –°–∫–∞–Ω –∫–æ–¥ –æ—Ç–∂–∞—Ç–∏—è –±—É–∫–≤—ã	Y
    313	    1468  74 04	90 90					 je Konec ; –ï—Å–ª–∏ Y –æ—Ç–∂–∞–ª–∏,—Ç–æ –∏–¥–µ–º –¥–∞–ª—å—à–µ
    314	    146C  EB F6						 jmp Y2	; –ï—Å–ª–∏ –∫–Ω–æ–ø–∫–∞	–µ—â–µ –Ω–µ –æ—Ç–∂–∞—Ç–∞ –∂–¥–µ–º   +
    315					 –æ—Ç–∂–∞—Ç–∏—è
    316
    317	    146E					 Konec:
    318	    146E  2E: 80 3E 010Br 01				 cmp OK_Text,01h;‚îê–µ—Å–ª–∏ —ç–∫—Ä–∞–Ω	–Ω–µ –±—ã–ª –≤—ã–∫–ª—é—á–µ–Ω,
    319	    1474  75 14	90 90					 jne Exit009	;‚îò—Ç–æ –≤—ã—Ö–æ–¥
    320
    321	    1478  E8 FED4					 call  VideoXcg	 ;–∏–Ω–∞—á–µ –≤–∫–ª—é—á–∏—Ç—å —ç–∫—Ä–∞–Ω
    322	    147B  B4 01						 mov   AH,01h	  ;‚îê
    323	    147D  2E: 8B 0E 134Dr				 mov   CX,CurSize; ‚îÇ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫—É—Ä—Å–æ—Ä
    324	    1482  CD 10						 int   10h	  ;‚îò
    325	    1484  2E: C6 06 010Br 00				 mov OK_Text,0h;—Å–±—Ä–æ—Å–∏—Ç—å –ø—Ä–∏–∑–Ω–∞–∫	–≥–∞—à–µ–Ω–∏—è	    +
    326					 —ç–∫—Ä–∞–Ω–∞
    327
    328
    329
    330
    331	    148A			    Exit009:
    332	    148A  33 C0			      xor  AX, AX     ;‚îê
    333	    148C  8E C0			      mov  ES, AX     ;‚îÇ–æ—á–∏—Å—Ç–∏—Ç—å —Ñ–ª–∞–≥–∏ –Ω–∞–∂–∞—Ç–∏—è
    334	    148E  26: A0 0418		      mov AL,ES:[418h];‚îÇ<Control+Alt>	–ø–æ –∞–¥—Ä–µ—Å—É
    335	    1492  24 BE			      and AL,10111110b;‚îÇ0000h:0417h –∏ —Ñ–ª–∞–≥–∏
    336	    1494  26: A2 0418		      mov ES:[418h],AL;‚îÇ<LeftControl+LeftAlt>
    337	    1498  26: A0 0417			  mov AL,ES:[417h];‚îÇ<Control+Alt> –ø–æ –∞–¥—Ä–µ—Å—É
    338	    149C  24 DE			      and AL,11011110b;‚îÇ0000h:0417h –∏ —Ñ–ª–∞–≥–∏
    339	    149E  26: A2 0417		      mov ES:[417h],AL;‚îÇ<LeftControl+LeftAlt>
    340
    341	    14A2  B0 20			      mov   AL,20h	  ;‚îê–æ–±—Å–ª—É–∂–∏—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
    342	    14A4  E6 20			      out   20h,AL	  ;‚îò–ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π
Turbo Assembler	 Version 4.1	    11/16/22 11:41:21	    Page 7
code.asm



    343
    344	    14A6  FA			      cli		  ;–∑–∞–ø—Ä–µ—Ç–∏—Ç—å –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è
    345	    14A7  07			      pop   ES		  ;‚îê
    346	    14A8  1F			      pop   DS		  ;‚îÇ
    347	    14A9  5E			      pop   SI		  ;‚îÇ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
    348	    14AA  5F			      pop   DI		  ;‚îÇ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ
    349	    14AB  59			      pop   CX		  ;‚îÇ—Ä–µ–≥–∏—Å—Ç—Ä—ã
    350	    14AC  5B			      pop   BX		  ;‚îÇ
    351	    14AD  58			      pop   AX		  ;‚îò
    352	    14AE  CF			      iret		  ;–≤—ã–π—Ç–∏ –∏–∑ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è
    353
    354	    14AF			    Exit09:
    355	    14AF  FA			      cli	   ;–∑–∞–ø—Ä–µ—Ç–∏—Ç—å –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è
    356	    14B0  07			      pop   ES		  ;‚îê
    357	    14B1  1F			      pop   DS		  ;‚îÇ
    358	    14B2  5E			      pop   SI		  ;‚îÇ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
    359	    14B3  5F			      pop   DI		  ;‚îÇ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ
    360	    14B4  59			      pop   CX		  ;‚îÇ—Ä–µ–≥–∏—Å—Ç—Ä—ã
    361	    14B5  5B			      pop   BX		  ;‚îÇ
    362	    14B6  58			      pop   AX		  ;‚îò
    363	    14B7  2E: FF 2E 0103r	    jmp	CS:OldInt09;–ø–µ—Ä–µ–¥–∞—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
    364							   ;"–ø–æ —Ü–µ–ø–æ—á–∫–µ" —Å–ª–µ–¥—É—é—â–µ–º—É –æ–±—Ä–∞–±–æ—Ç—á–∏–∫—É Int09h
    365
    366	    14BC			  Int09Hand endp
    367
    368					  ;–û–ë–†–ê–ë–û–¢–ß–ò–ö	–ü–†–ï–†–´–í–ê–ù–ò–Ø Int16h (–í–ò–î–ï–û	–§–£–ù–ö–¶–ò–ò
    369					  ;BIOS)
    370
    371	    14BC  3AFA			      dw TestInt16; —Å–ª–æ–≤–æ –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞
    372
    373	    14BE			  Presense proc
    374	    14BE  80 FC	EE		      cmp AH,FuncNum; –æ–±—Ä–∞—â–µ–Ω–∏–µ –æ—Ç –Ω–∞—à–µ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã?
    375	    14C1  75 06	90 90		      jne Pass;	–µ—Å–ª–∏ –Ω–µ—Ç	—Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞—Ç—å
    376	    14C5  B8 2D0C		      mov AX,CodeOut; –∏–Ω–∞—á–µ –≤ AX —É—Å–ª–æ–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥
    377	    14C8  CF			      iret	    ;–∏	–≤–æ–∑–≤—Ä–∞—Ç–∏—Ç—å—Å—è
    378
    379
    380	    14C9			    Pass:
    381	    14C9  2E: FF 2E 0107r	      jmp   CS:OldInt16	  ;–ø–µ—Ä–µ–¥–∞—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
    382								      ;"–ø–æ —Ü–µ–ø–æ—á–∫–µ"
    383								      ;—Å–ª–µ–¥—É—é—â–µ–º—É –æ–±—Ä–∞–±–æ—Ç—á–∏–∫—É Int16h
    384	    14CE			  Presense endp
    385
    386
    387					  ;‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë –ù –ï –† –ï	–ó –ò –î –ï –ù –¢ –ù –´	–ï   –î	–ê –ù –ù –´ –ï	    +
    388					 ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë
    389
    390	    14CE  ??			  ResEnd      db    ?	 ;–±–∞–π—Ç –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–∏—è –≥—Ä–∞–Ω–∏—Ü—ã —Ä–µ-
    391								 ;–∑–∏–¥–µ—Ç–Ω–æ–π —á–∞—Å—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã
    392		  =0001			  On	      equ   1	 ;–∑–Ω–∞—á–µ–Ω–∏–µ "—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ" –¥–ª—è  —Ñ–ª–∞–≥–æ–≤
    393		  =0000			  Off	      equ   0	 ;–∑–Ω–∞—á–µ–Ω–∏–µ "—Å–±—Ä–æ—à–µ–Ω–æ" –¥–ª—è —Ñ–ª–∞–≥–æ–≤
    394		  =0007			  Bell	      equ   7	 ;–∫–æ–¥ —Å–∏–º–≤–æ–ª  BELL
    395		  =000D			  CR	      equ   13	 ;–∫–æ–¥ —Å–∏–º–≤–æ–ª  CR
    396		  =000A			  LF	      equ   10	 ;–∫–æ–¥ —Å–∏–º–≤–æ–ª  LF
    397		  =0002			  MinDosVer   equ   2	 ;–º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–æ–∑–º–æ–∂–Ω–∞—è –≤–µ—Ä—Å–∏—è DOS
    398
    399	    14CF  ??			  InstFlag    db    ?	 ;—Ñ–ª–∞–≥ –Ω–∞–ª–∏—á–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã –≤	–ø–∞–º—è—Ç–∏
Turbo Assembler	 Version 4.1	    11/16/22 11:41:21	    Page 8
code.asm



    400	    14D0  ????			  SaveCS      dw    ?	 ;—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π CS —Ä–µ–∑–∏–¥–µ—Ç–æ–π –ø—Ä–æ–≥-
    401								 ;—Ä–∞–º–º—ã
    402
    403	    14D2  0D 0A	E2 96 91 E2 96+	  Copyright   db CR,LF,'‚ñë‚ñëL	O C K E	R‚ñë‚ñë	demonstration pro'
    404		  91 4C	20 4F 20 43 20+
    405		  4B 20	45 20 52 E2 96+
    406		  91 E2	96 91 20 64 65+
    407		  6D 6F	6E 73 74 72 61+
    408		  74 69	6F 6E 20 70 72+
    409		  6F
    410	    14FD  67 72	61 6D 0D 0A 0A+		      db 'gram',CR,LF,LF,'$'
    411		  24
    412	    1505  45 72	72 6F 72 3A 20+	  VerDosMsg   db 'Error: incorrect DOS version'
    413		  69 6E	63 6F 72 72 65+
    414		  63 74	20 44 4F 53 20+
    415		  76 65	72 73 69 6F 6E
    416	    1521  07 0D	0A 24			      db Bell,CR,LF,'$'
    417	    1525  54 68	65 20 4C 4F 43+	  InstMsg     db 'The LOCKER program is	installed. To withdraw'
    418		  4B 45	52 20 70 72 6F+
    419		  67 72	61 6D 20 69 73+
    420		  20 69	6E 73 74 61 6C+
    421		  6C 65	64 2E 20 54 6F+
    422		  20 77	69 74 68 64 72+
    423		  61 77
    424	    1551  75 73	65 20 6B 65 79+		      db 'use key /u',CR,LF
    425		  20 2F	75 0D 0A
    426	    155D  54 6F	20 22 6C 6F 63+		      db 'To "lock", press <Shift Right+CapsLock+L>',CR,LF
    427		  6B 22	2C 20 70 72 65+
    428		  73 73	20 3C 53 68 69+
    429		  66 74	20 52 69 67 68+
    430		  74 2B	43 61 70 73 4C+
    431		  6F 63	6B 2B 4C 3E 0D+
    432		  0A
    433	    1588  54 6F	20 22 75 6E 6C+		      db 'To "unlock", press DMITRY'
    434		  6F 63	6B 22 2C 20 70+
    435		  72 65	73 73 20 44 4D+
    436		  49 54	52 59
    437	    15A1  0D 0A	24			      db CR,LF,'$'
    438	    15A4  45 72	72 6F 72 3A 20+	  AlreadyMsg  db 'Error: LOCKER	is already resident in memory'
    439		  4C 4F	43 4B 45 52 20+
    440		  69 73	20 61 6C 72 65+
    441		  61 64	79 20 72 65 73+
    442		  69 64	65 6E 74 20 69+
    443		  6E 20	6D 65 6D 6F 72+
    444		  79
    445	    15CF  07 0D	0A 24			      db Bell,CR,LF,'$'
    446	    15D3  54 68	65 20 4C 4F 43+	  UninstMsg   db 'The LOCKER program has been removed from the resident'
    447		  4B 45	52 20 70 72 6F+
    448		  67 72	61 6D 20 68 61+
    449		  73 20	62 65 65 6E 20+
    450		  72 65	6D 6F 76 65 64+
    451		  20 66	72 6F 6D 20 74+
    452		  68 65	20 72 65 73 69+
    453		  64 65	6E 74
    454	    1608  0D 0A	24			      db CR,LF,'$'
    455	    160B  45 72	72 6F 72 3A 20+	  NotInstMsg  db 'Error: The LOCKER program is already installed'
    456		  54 68	65 20 4C 4F 43+
Turbo Assembler	 Version 4.1	    11/16/22 11:41:21	    Page 9
code.asm



    457		  4B 45	52 20 70 72 6F+
    458		  67 72	61 6D 20 69 73+
    459		  20 61	6C 72 65 61 64+
    460		  79 20	69 6E 73 74 61+
    461		  6C 6C	65 64
    462	    1639  07 0D	0A 24			      db Bell,CR,LF,'$'
    463	    163D  45 72	72 6F 72 3A 20+	  NotSafeMsg  db 'Error: remove	the LOCKER program from	the resident'
    464		  72 65	6D 6F 76 65 20+
    465		  74 68	65 20 4C 4F 43+
    466		  4B 45	52 20 70 72 6F+
    467		  67 72	61 6D 20 66 72+
    468		  6F 6D	20 74 68 65 20+
    469		  72 65	73 69 64 65 6E+
    470		  74
    471	    166F  61 74	20 74 68 65 20+		      db 'at the moment',CR,LF,'impossible because of'
    472		  6D 6F	6D 65 6E 74 0D+
    473		  0A 69	6D 70 6F 73 73+
    474		  69 62	6C 65 20 62 65+
    475		  63 61	75 73 65 20 6F+
    476		  66
    477	    1693  69 6E	74 65 72 63 65+		      db 'interception of some vectors',Bell,CR,LF,'$'
    478		  70 74	69 6F 6E 20 6F+
    479		  66 20	73 6F 6D 65 20+
    480		  76 65	63 74 6F 72 73+
    481		  07 0D	0A 24
    482
    483
    484					 ;‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë –ù	–ï –† –ï –ó –ò –î –ï –ù	–¢ –ù –´ –ï   –ü –† –û –¶ –ï –î	–£ –† –´    +
    485					 ‚ñë‚ñë‚ñë‚ñë‚ñë
    486
    487					 ;–í–ö–õ–Æ–ß–ê–ï–ú–´–ô –§–ê–ô–õ	–î–õ–Ø –í–´–ü–û–õ–ù–ï–ù–ò–Ø –ü–†–û–¶–ï–î–£–†–´ –í–´–í–û–î–ê +
    488					 –ò–ù–§–û–†–ú–ê–¶–ò–ò
    489
    490		  =0000			  Locker      equ   0	   ;–∏–º—è –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –øp–æ–≥p–∞–º–º—ã
    491								   ;–≤–æ –≤–∫–ª—é—á–∞–µ–º–æ–º —Ñ–∞–π–ª–µ
    492					  include     INFO.INC	   ;–≤–∫–ª—é—á–∞–µ–º—ã–π —Ñ–∞–π–ª —Å –ø—Ä–æ—Ü–µ–¥—É—Ä–æ–π –≤—ã-
1   493
1   494		  =0001			  @TopRow     equ   1
1   495		  =0003			  @LeftCol    equ   3
1   496		  =0016			  @BotRow     equ   22
1   497		  =004C			  @RightCol   equ   76
1   498	    16B3  ????			  @MsgAddres  dw    ?
1   499	    16B5  01			  @VGAFlag    db    1
1   500	    16B6  B800			  @ScrBufSeg  dw    0B800h
1   501	    16B8  ????			  @PageOfs    dw    ?
1   502	    16BA  ??			  @SaveRegime db    ?
1   503	    16BB  0250*(1C) 94*(00)	  @Attr1      db    74*8 dup(1Ch),74*2 dup(0)
1   504	    199F  03C2*(1E)		  @Attr2      db    74*13 dup(1Eh)
1   505	    1D61  0300*(??)		  @PelRegMas  db    300h dup(?)
1   506
1   507
1   508
1   509	    2061  20 DA	C4 C4 C4 C4 C4+	  @LockerInfo db    '									    +
    510		  C4 C4	C4 C4 C4 C4 C4+	 ⁄ƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒø '
    511		  C4 C4	C4 C4 C4 C4 C4+
    512		  C4 C4	C4 C4 C4 C4 C4+
    513		  C4 C4	C4 C4 C4 C4 C4+
Turbo Assembler	 Version 4.1	    11/16/22 11:41:21	    Page 10
code.asm



    514		  C4 C4	C4 C4 C4 C4 C4+
    515		  C4 C4	C4 C4 C4 C4 C4+
    516		  C4 C4	C4 C4 C4 C4 C4+
    517		  C4 C4	C4 C4 C4 C4 C4+
    518		  C4 C4	C4 C4 C4 C4 C4+
    519		  C4 C4	BF 20
1   520	    20AB  20 B3	20 20 20 20 20+		      db    ' ≥									    +
    521		  20 20	20 20 20 20 20+	 ≥ '
    522		  20 20	20 20 20 20 20+
    523		  20 20	20 20 20 20 20+
    524		  20 20	20 20 20 20 20+
    525		  20 20	20 20 20 20 20+
    526		  20 20	20 20 20 20 20+
    527		  20 20	20 20 20 20 20+
    528		  20 20	20 20 20 20 20+
    529		  20 20	20 20 20 20 20+
    530		  20 20	B3 20
1   531	    20F5  20 B3	20 20 20 20 20+		      db    ' ≥		      €	     ‹ﬂﬂﬂ‹  ‹ﬂﬂﬂ‹  €  ‹ﬂ   €ﬂﬂﬂﬂ  €ﬂﬂﬂ‹		    +
    532		  20 20	20 20 20 20 20+	 ≥ '
    533		  20 20	20 DB 20 20 20+
    534		  20 20	20 DC DF DF DF+
    535		  DC 20	20 DC DF DF DF+
    536		  DC 20	20 DB 20 20 DC+
    537		  DF 20	20 20 DB DF DF+
    538		  DF DF	20 20 DB DF DF+
    539		  DF DC	20 20 20 20 20+
    540		  20 20	20 20 20 20 20+
    541		  20 20	B3 20
1   542	    213F  20 B3	20 20 20 20 20+		      db    ' ≥		      €	     €	 €  €	   €‹ﬂ	   €‹‹‹	  €   €		    +
    543		  20 20	20 20 20 20 20+	 ≥ '
    544		  20 20	20 DB 20 20 20+
    545		  20 20	20 DB 20 20 20+
    546		  DB 20	20 DB 20 20 20+
    547		  20 20	20 DB DC DF 20+
    548		  20 20	20 20 DB DC DC+
    549		  DC 20	20 20 DB 20 20+
    550		  20 DB	20 20 20 20 20+
    551		  20 20	20 20 20 20 20+
    552		  20 20	B3 20
1   553	    2189  20 B3	20 20 20 20 20+		      db    ' ≥		      €	     €	 €  €	   € ﬂ‹	   €	  €ﬂ€ﬂ		    +
    554		  20 20	20 20 20 20 20+	 ≥ '
    555		  20 20	20 DB 20 20 20+
    556		  20 20	20 DB 20 20 20+
    557		  DB 20	20 DB 20 20 20+
    558		  20 20	20 DB 20 DF DC+
    559		  20 20	20 20 DB 20 20+
    560		  20 20	20 20 DB DF DB+
    561		  DF 20	20 20 20 20 20+
    562		  20 20	20 20 20 20 20+
    563		  20 20	B3 20
1   564	    21D3  20 B3	20 20 20 20 20+		      db    ' ≥		      €‹‹‹‹  ﬂ‹‹‹ﬂ  ﬂ‹‹‹ﬂ  €   ﬂ‹  €‹‹‹‹  €  ﬂ‹		    +
    565		  20 20	20 20 20 20 20+	 ≥ '
    566		  20 20	20 DB DC DC DC+
    567		  DC 20	20 DF DC DC DC+
    568		  DF 20	20 DF DC DC DC+
    569		  DF 20	20 DB 20 20 20+
    570		  DF DC	20 20 DB DC DC+
Turbo Assembler	 Version 4.1	    11/16/22 11:41:21	    Page 11
code.asm



    571		  DC DC	20 20 DB 20 20+
    572		  DF DC	20 20 20 20 20+
    573		  20 20	20 20 20 20 20+
    574		  20 20	B3 20
1   575	    221D  20 B3	20 20 20 20 20+		      db    ' ≥									    +
    576		  20 20	20 20 20 20 20+	 ≥ '
    577		  20 20	20 20 20 20 20+
    578		  20 20	20 20 20 20 20+
    579		  20 20	20 20 20 20 20+
    580		  20 20	20 20 20 20 20+
    581		  20 20	20 20 20 20 20+
    582		  20 20	20 20 20 20 20+
    583		  20 20	20 20 20 20 20+
    584		  20 20	20 20 20 20 20+
    585		  20 20	B3 20
1   586	    2267  20 C0	C4 C4 C4 C4 C4+		      db    '									    +
    587		  C4 C4	C4 C4 C4 C4 C4+	 ¿ƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒŸ '
    588		  C4 C4	C4 C4 C4 C4 C4+
    589		  C4 C4	C4 C4 C4 C4 C4+
    590		  C4 C4	C4 C4 C4 C4 C4+
    591		  C4 C4	C4 C4 C4 C4 C4+
    592		  C4 C4	C4 C4 C4 C4 C4+
    593		  C4 C4	C4 C4 C4 C4 C4+
    594		  C4 C4	C4 C4 C4 C4 C4+
    595		  C4 C4	C4 C4 C4 C4 C4+
    596		  C4 C4	D9 20
1   597	    22B1  20 20	20 20 20 20 20+		      db    '									    +
    598		  20 20	20 20 20 20 20+	 '
    599		  20 20	20 20 20 20 20+
    600		  20 20	20 20 20 20 20+
    601		  20 20	20 20 20 20 20+
    602		  20 20	20 20 20 20 20+
    603		  20 20	20 20 20 20 20+
    604		  20 20	20 20 20 20 20+
    605		  20 20	20 20 20 20 20+
    606		  20 20	20 20 20 20 20+
    607		  20 20	20 20
1   608	    22FB  20 20	20 20 20 20 20+		      db    '									    +
    609		  20 20	20 20 20 20 20+	 '
    610		  20 20	20 20 20 20 20+
    611		  20 20	20 20 20 20 20+
    612		  20 20	20 20 20 20 20+
    613		  20 20	20 20 20 20 20+
    614		  20 20	20 20 20 20 20+
    615		  20 20	20 20 20 20 20+
    616		  20 20	20 20 20 20 20+
    617		  20 20	20 20 20 20 20+
    618		  20 20	20 20
1   619	    2345  20 C9	CD CD CD CD CD+		      db    '									    +
    620		  CD CD	CD CD CD CD CD+	 …ÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕª '
    621		  CD CD	CD CD CD CD CD+
    622		  CD CD	CD CD CD CD CD+
    623		  CD CD	CD CD CD CD CD+
    624		  CD CD	CD CD CD CD CD+
    625		  CD CD	CD CD CD CD CD+
    626		  CD CD	CD CD CD CD CD+
    627		  CD CD	CD CD CD CD CD+
Turbo Assembler	 Version 4.1	    11/16/22 11:41:21	    Page 12
code.asm



    628		  CD CD	CD CD CD CD CD+
    629		  CD CD	BB 20
1   630	    238F  20 BA	20 20 4C 4F 43+		      db    ' ∫	 LOCKER	- Ì‚Æ §•¨Æ≠·‚‡†Ê®Æ≠≠†Ô Ø‡Æ£‡†¨¨† ØÆ ®·ØÆ´ÏßÆ¢†≠®Ó ·®·‚•¨≠ÎÂ +
    631		  4B 45	52 20 2D 20 ED+	 ∫ '
    632		  E2 AE	20 A4 A5 AC AE+
    633		  AD E1	E2 E0 A0 E6 A8+
    634		  AE AD	AD A0 EF 20 AF+
    635		  E0 AE	A3 E0 A0 AC AC+
    636		  A0 20	AF AE 20 A8 E1+
    637		  AF AE	AB EC A7 AE A2+
    638		  A0 AD	A8 EE 20 E1 A8+
    639		  E1 E2	A5 AC AD EB E5+
    640		  20 20	BA 20
1   641	    23D9  20 BA	20 20 E1 E0 A5+		      db    ' ∫	 ·‡•§·‚¢ MS DOS	® BIOS	§´Ô IBM-·Æ¢¨•·‚®¨ÎÂ ™Æ¨ØÏÓ‚•‡Æ¢. LOCKER	ØÆ- +
    642		  A4 E1	E2 A2 20 4D 53+	 ∫ '
    643		  20 44	4F 53 20 A8 20+
    644		  42 49	4F 53 20 20 A4+
    645		  AB EF	20 49 42 4D 2D+
    646		  E1 AE	A2 AC A5 E1 E2+
    647		  A8 AC	EB E5 20 AA AE+
    648		  AC AF	EC EE E2 A5 E0+
    649		  AE A2	2E 20 4C 4F 43+
    650		  4B 45	52 20 AF AE 2D+
    651		  20 20	BA 20
1   652	    2423  20 BA	20 20 A7 A2 AE+		      db    ' ∫	 ß¢Æ´Ô•‚ "ß†Ø®‡†‚Ï" ™´†¢®†‚„‡„ ≠† ¢‡•¨Ô	 ¢†Ë•£Æ	Æ‚·„‚·‚¢®Ô, •·´® ¢Î +
    653		  AB EF	A5 E2 20 22 A7+	 ∫ '
    654		  A0 AF	A8 E0 A0 E2 EC+
    655		  22 20	AA AB A0 A2 A8+
    656		  A0 E2	E3 E0 E3 20 AD+
    657		  A0 20	A2 E0 A5 AC EF+
    658		  20 20	A2 A0 E8 A5 A3+
    659		  AE 20	AE E2 E1 E3 E2+
    660		  E1 E2	A2 A8 EF 2C 20+
    661		  A5 E1	AB A8 20 A2 EB+
    662		  20 20	BA 20
1   663	    246D  20 BA	20 20 E5 AE E2+		      db    ' ∫	 ÂÆ‚®‚•	Á‚Æ-‚Æ ·™‡Î‚Ï Æ‚ ØÆ·‚Æ‡Æ≠≠®Â £´†ß ®´® ≠•¶•´†‚•´Ï≠Æ£Æ ¢¨•Ë†- +
    664		  A8 E2	A5 20 E7 E2 AE+	 ∫ '
    665		  2D E2	AE 20 E1 AA E0+
    666		  EB E2	EC 20 AE E2 20+
    667		  AF AE	E1 E2 AE E0 AE+
    668		  AD AD	A8 E5 20 A3 AB+
    669		  A0 A7	20 A8 AB A8 20+
    670		  AD A5	A6 A5 AB A0 E2+
    671		  A5 AB	EC AD AE A3 AE+
    672		  20 A2	AC A5 E8 A0 2D+
    673		  20 20	BA 20
1   674	    24B7  20 BA	20 20 E2 A5 AB+		      db    ' ∫	 ‚•´Ï·‚¢†. è‡® ß†Ø„·™• ®·ØÆ´Ïß„Ó‚·Ô ·´•§„ÓÈ®• ™´ÓÁ®:		    +
    675		  EC E1	E2 A2 A0 2E 20+	 ∫ '
    676		  8F E0	A8 20 A7 A0 AF+
    677		  E3 E1	AA A5 20 A8 E1+
    678		  AF AE	AB EC A7 E3 EE+
    679		  E2 E1	EF 20 E1 AB A5+
    680		  A4 E3	EE E9 A8 A5 20+
    681		  AA AB	EE E7 A8 3A 20+
    682		  20 20	20 20 20 20 20+
    683		  20 20	20 20 20 20 20+
    684		  20 20	BA 20
Turbo Assembler	 Version 4.1	    11/16/22 11:41:21	    Page 13
code.asm



1   685	    2501  20 BA	20 20 20 20 20+		      db    ' ∫	    /i - „·‚†≠Æ¢®‚Ï Ø‡Æ£‡†¨¨„ ¢	‡•ß®§•≠‚;			    +
    686		  2F 69	20 2D 20 E3 E1+	 ∫ '
    687		  E2 A0	AD AE A2 A8 E2+
    688		  EC 20	AF E0 AE A3 E0+
    689		  A0 AC	AC E3 20 A2 20+
    690		  E0 A5	A7 A8 A4 A5 AD+
    691		  E2 3B	20 20 20 20 20+
    692		  20 20	20 20 20 20 20+
    693		  20 20	20 20 20 20 20+
    694		  20 20	20 20 20 20 20+
    695		  20 20	BA 20
1   696	    254B  20 BA	20 20 20 20 20+		      db    ' ∫	    /u - ·≠Ô‚Ï Ø‡Æ£‡†¨¨„ · ‡•ß®§•≠‚†.				    +
    697		  2F 75	20 2D 20 E1 AD+	 ∫ '
    698		  EF E2	EC 20 AF E0 AE+
    699		  A3 E0	A0 AC AC E3 20+
    700		  E1 20	E0 A5 A7 A8 A4+
    701		  A5 AD	E2 A0 2E 20 20+
    702		  20 20	20 20 20 20 20+
    703		  20 20	20 20 20 20 20+
    704		  20 20	20 20 20 20 20+
    705		  20 20	20 20 20 20 20+
    706		  20 20	BA 20
1   707	    2595  20 BA	20 20 8A AB A0+		      db    ' ∫	 ä´†¢®†‚„‡†  "ß†Ø®‡†•‚·Ô"  ≠†¶†‚®•¨ <Cntrl+Alt+L> , †  "Æ‚Ø®‡†•‚·Ô" +
    708		  A2 A8	A0 E2 E3 E0 A0+	 ∫ '
    709		  20 20	22 A7 A0 AF A8+
    710		  E0 A0	A5 E2 E1 EF 22+
    711		  20 20	AD A0 A6 A0 E2+
    712		  A8 A5	AC 20 3C 43 6E+
    713		  74 72	6C 2B 41 6C 74+
    714		  2B 4C	3E 20 2C 20 A0+
    715		  20 20	22 AE E2 AF A8+
    716		  E0 A0	A5 E2 E1 EF 22+
    717		  20 20	BA 20
1   718	    25DF  20 BA	20 20 E2 E0 A5+		      db    ' ∫	 ‚‡•Â™‡†‚≠Î¨ ≠†¶†‚®•¨ ≠† <Cntrl>  (‚„™-‚„™-‚„™). ãÓ°Æ©	§‡„£Æ© ™´ÓÁ +
    719		  E5 AA	E0 A0 E2 AD EB+	 ∫ '
    720		  AC 20	AD A0 A6 A0 E2+
    721		  A8 A5	AC 20 AD A0 20+
    722		  3C 43	6E 74 72 6C 3E+
    723		  20 20	28 E2 E3 AA 2D+
    724		  E2 E3	AA 2D E2 E3 AA+
    725		  29 2E	20 8B EE A1 AE+
    726		  A9 20	20 A4 E0 E3 A3+
    727		  AE A9	20 AA AB EE E7+
    728		  20 20	BA 20
1   729	    2629  20 BA	20 20 A8 AB A8+		      db    ' ∫	 ®´® •£Æ Æ‚·„‚·‚¢®• ¢ÎßÆ¢„‚ ØÆÔ¢´•≠®• §†≠≠Æ© ®≠‰Æ‡¨†Ê®®.	    +
    730		  20 A5	A3 AE 20 AE E2+	 ∫ '
    731		  E1 E3	E2 E1 E2 A2 A8+
    732		  A5 20	A2 EB A7 AE A2+
    733		  E3 E2	20 AF AE EF A2+
    734		  AB A5	AD A8 A5 20 A4+
    735		  A0 AD	AD AE A9 20 A8+
    736		  AD E4	AE E0 AC A0 E6+
    737		  A8 A8	2E 20 20 20 20+
    738		  20 20	20 20 20 20 20+
    739		  20 20	BA 20
1   740	    2673  20 C8	CD CD CD CD CD+		      db    '									    +
    741		  CD CD	CD CD CD CD CD+	 »ÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕº '
Turbo Assembler	 Version 4.1	    11/16/22 11:41:21	    Page 14
code.asm



    742		  CD CD	CD CD CD CD CD+
    743		  CD CD	CD CD CD CD CD+
    744		  CD CD	CD CD CD CD CD+
    745		  CD CD	CD CD CD CD CD+
    746		  CD CD	CD CD CD CD CD+
    747		  CD CD	CD CD CD CD CD+
    748		  CD CD	CD CD CD CD CD+
    749		  CD CD	CD CD CD CD CD+
    750		  CD CD	BC 20
1   751
1   752
1   753
1   754	    26BD			  @WriteInfo  proc
1   755	    26BD  06				      push  ES
1   756
1   757
1   758
1   759	    26BE  BD 2061r			       lea   BP,@LockerInfo
1   760
1   761
1   762
1   763	    26C1  BE 16BBr			      lea   SI,@Attr1
1   764	    26C4  2E: A1 16B6r			      mov   AX,@ScrBufSeg
1   765	    26C8  8E C0				      mov   ES,AX
1   766	    26CA  B6 01				      mov   DH,@TopRow
1   767	    26CC  B0 A0				      mov   AL,160
1   768	    26CE  F6 E6				      mul   DH
1   769	    26D0  8B F8				      mov   DI,AX
1   770	    26D2  B2 03			     @L1Draw: mov   DL,@LeftCol
1   771	    26D4  32 FF				      xor   BH,BH
1   772	    26D6  8A DA				      mov   BL,DL
1   773	    26D8  D1 E3				      shl   BX,1
1   774	    26DA  2E: 03 1E 16B8r		      add   BX,@PageOfs
1   775	    26DF  8A 24			     @L2Draw: mov   AH,DS:[SI]
1   776	    26E1  46				      inc   SI
1   777	    26E2  3E: 8A 46 00			      mov   AL,DS:[BP]
1   778	    26E6  45				      inc   BP
1   779	    26E7  26: 89 01			      mov   ES:[BX+DI],AX
1   780	    26EA  43				      inc   BX
1   781	    26EB  43				      inc   BX
1   782	    26EC  FE C2				      inc   DL
1   783	    26EE  80 FA	4C			      cmp   DL,@RightCol
1   784	    26F1  76 EC				      jbe   @L2Draw
1   785	    26F3  81 C7	00A0			      add   DI,160
1   786	    26F7  FE C6				      inc   DH
1   787	    26F9  80 FE	16			      cmp   DH,@BotRow
1   788	    26FC  76 D4				      jbe   @L1Draw
1   789	    26FE  07				      pop   ES
1   790	    26FF  C3				      ret
1   791	    2700			  @WriteInfo  endp
1   792
1   793	    2700			  @TestVideo  proc
1   794	    2700  B4 0F				      mov   AH,0Fh
1   795	    2702  CD 10				      int   10h
1   796	    2704  2E: A2 16BAr			      mov   @SaveRegime,AL
1   797	    2708  3C 07				      cmp   AL,07h
1   798	    270A  B0 02				      mov   AL,02h
Turbo Assembler	 Version 4.1	    11/16/22 11:41:21	    Page 15
code.asm



1   799	    270C  75 1D	90 90			      jne   @NotMDA
1   800
1   801	    2710  2E: C7 06 16B6r B000		      mov   @ScrBufSeg,0B000h
1   802	    2717  B0 70				      mov   AL,70h
1   803	    2719  B9 0250			      mov   CX,74*8
1   804	    271C  BF 16BBr			      lea   DI,@Attr1
1   805	    271F  F3> AA			      rep   stosb
1   806	    2721  B0 07				      mov   AL,07h
1   807	    2723  B9 03C2			      mov   CX,74*13
1   808	    2726  BF 199Fr			      lea   DI,@Attr2
1   809	    2729  F3> AA			      rep   stosb
1   810
1   811	    272B  32 E4			    @NotMDA:  xor   AH,AH
1   812	    272D  CD 10				      int   10h
1   813	    272F  B5 20				      mov   CH,20h
1   814	    2731  B4 01				      mov   AH,1
1   815	    2733  CD 10				      int   10h
1   816
1   817	    2735  06				      push  ES
1   818	    2736  33 C0				      xor   AX,AX
1   819	    2738  8E C0				      mov   ES,AX
1   820	    273A  26: A1 044E			      mov   AX,ES:[44Eh]
1   821	    273E  2E: A3 16B8r			      mov   @PageOfs,AX
1   822	    2742  07				      pop   ES
1   823
1   824	    2743  B8 1A00			      mov   AX,1A00h
1   825	    2746  CD 10				      int   10h
1   826	    2748  3C 1A				      cmp   AL,1Ah
1   827	    274A  74 07	90 90			      je    @EndTst
1   828	    274E  2E: FE 0E 16B5r		      dec   @VGAFlag
1   829
1   830	    2753  C3			    @EndTst:  ret
1   831	    2754			  @TestVideo  endp
1   832
1   833	    2754			  @ReadPelReg proc
1   834	    2754  BA 03C7			      mov   DX,3C7h
1   835	    2757  32 C0				      xor   AL,AL
1   836	    2759  FA				      cli
1   837	    275A  EE				      out   DX,AL
1   838
1   839	    275B  B9 0300			      mov   CX,300h
1   840	    275E  BA 03C9			      mov   DX,3C9h
1   841
1   842	    2761  EC			    @NextPelR:in    AL,DX
1   843	    2762  24 3F				      and   AL,3Fh
1   844	    2764  AA				      stosb
1   845	    2765  E2 FA				      loop  @NextPelR
1   846
1   847	    2767  FB				      sti
1   848	    2768  C3				      ret
1   849	    2769			  @ReadPelReg endp
1   850
1   851	    2769			  @WritePelReg proc
1   852	    2769  BA 03C8			      mov   DX,3C8h
1   853	    276C  32 C0				      xor   AL,AL
1   854	    276E  FA				      cli
1   855	    276F  EE				      out   DX,AL
Turbo Assembler	 Version 4.1	    11/16/22 11:41:21	    Page 16
code.asm



1   856
1   857	    2770  BA 03DA		     @Vert:   mov   DX,3DAh
1   858	    2773  EC				      in    AL,DX
1   859	    2774  24 08				      and   AL,08h
1   860	    2776  74 F8				      jz    @Vert
1   861
1   862	    2778  B9 0300			      mov   CX,300h
1   863	    277B  BA 03C9			      mov   DX,3C9h
1   864
1   865	    277E  AC			    @NextPelW:lodsb
1   866	    277F  0A C0				      or    AL,AL
1   867	    2781  74 16	90 90			      jz    @OutPel
1   868	    2785  02 C4				      add   AL,AH
1   869	    2787  3C 00				      cmp   AL,0
1   870	    2789  7F 06	90 90			      jg    @MaxPel
1   871	    278D  B0 00				      mov   AL,0
1   872	    278F  EB 08				      jmp   short @OutPel
1   873
1   874	    2791  3C 3F			    @MaxPel:  cmp   AL,3Fh
1   875	    2793  76 04	90 90			      jbe   @OutPel
1   876	    2797  B0 3F				      mov   AL,3Fh
1   877
1   878	    2799  EE			    @OutPel:  out   DX,AL
1   879	    279A  E2 E2				      loop  @NextPelW
1   880
1   881	    279C  FB				      sti
1   882	    279D  C3				      ret
1   883	    279E			  @WritePelReg endp
1   884
1   885	    279E			  @BeepSound  proc
1   886	    279E  B9 005A			      mov     CX,90
1   887	    27A1  BA 0258			      mov     DX,600
1   888	    27A4  BB 0258			      mov     BX,600
1   889
1   890	    27A7  E4 61				      in      AL,61h
1   891	    27A9  24 FE				      and     AL,0FEh
1   892
1   893	    27AB  51			     @L1Beep: push    CX
1   894	    27AC  0C 02				      or      AL,02h
1   895	    27AE  E6 61				      out     61h,AL
1   896
1   897	    27B0  8B CA				      mov     CX,DX
1   898	    27B2  E2 FE			     @L2Beep: loop    @L2Beep
1   899	    27B4  83 EA	05			      sub     DX,5
1   900
1   901	    27B7  24 FD				      and     AL,0FDh
1   902	    27B9  E6 61				      out     61h,AL
1   903
1   904	    27BB  8B CB				      mov     CX,BX
1   905	    27BD  E2 FE			     @L3Beep: loop    @L3Beep
1   906	    27BF  83 C3	05			      add     BX,5
1   907
1   908	    27C2  59				      pop     CX
1   909	    27C3  E2 E6				      loop    @L1Beep
1   910
1   911	    27C5  C3				      ret
1   912	    27C6			  @BeepSound  endp
Turbo Assembler	 Version 4.1	    11/16/22 11:41:21	    Page 17
code.asm



1   913
1   914	    27C6			  @InfoAbout  proc
1   915	    27C6  FC				      cld
1   916	    27C7  2E: 89 16 16B3r		      mov   @MsgAddres,DX
1   917	    27CC  E8 FF31			      call  @TestVideo
1   918	    27CF  2E: 80 3E 16B5r 01		      cmp   @VGAFlag,1
1   919	    27D5  75 10	90 90			      jne   @NotVGA
1   920
1   921	    27D9  BF 1D61r			      lea   DI,@PelRegMas
1   922	    27DC  E8 FF75			      call  @ReadPelReg
1   923	    27DF  B4 C4				      mov   AH,-60
1   924	    27E1  BE 1D61r			      lea   SI,@PelRegMas
1   925	    27E4  E8 FF82			      call  @WritePelReg
1   926
1   927	    27E7  E8 FED3		     @NotVGA: call  @WriteInfo
1   928	    27EA  2E: 80 3E 16B5r 01		      cmp   @VGAFlag,1
1   929	    27F0  75 16	90 90			      jne   @Key
1   930
1   931	    27F4  B4 C4				      mov   AH,-60
1   932
1   933	    27F6  FE C4			     @Next:   inc   AH
1   934	    27F8  BE 1D61r			      lea   SI,@PelRegMas
1   935	    27FB  E8 FF6B			      call  @WritePelReg
1   936
1   937	    27FE  B9 61A8			      mov   CX,25000
1   938	    2801  E2 FE			     @Pausa:  loop  @Pausa
1   939
1   940	    2803  80 FC	00			      cmp   AH,0
1   941	    2806  75 EE				      jne   @Next
1   942
1   943	    2808  E8 FF93		     @Key:    call  @BeepSound
1   944	    280B  B4 08				      mov   AH,08h
1   945	    280D  CD 21				      int   21h
1   946
1   947	    280F  32 E4				      xor   AH,AH
1   948	    2811  2E: A0 16BAr			      mov   AL,@SaveRegime
1   949	    2815  CD 10				      int   10h
1   950	    2817  C3				      ret
1   951	    2818			  @InfoAbout  endp
1   952
    953								   ;–≤–æ–¥–∞ –∏—Ñ–æ—Ä–º–∞—Ü–∏–∏
    954
    955					 ;–ì–õ–ê–í–ù–ê–Ø –ü–†–û–¶–ï–î–£–†–ê –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–ò
    956
    957	    2818			  InitProc proc
    958	    2818  B4 09			      mov   AH,09h	    ;‚îê
    959	    281A  BA 14D2r		      lea   DX,Copyright    ;‚îÇ–≤—ã–≤–µ—Å—Ç–∏	–Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    960	    281D  CD 21			      int   21h		    ;‚îò
    961
    962	    281F  BA 1505r		      lea   DX,VerDosMsg    ;‚îê–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é	DOS –∏ –≤—ã-
    963	    2822  E8 008D		      call  ChkDosVer	    ;‚îÇ–≤–µ—Å—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ,–µ—Å–ª–∏ –Ω–µ–ø–æ–¥-
    964	    2825  0F 82	007F		      jc    Output	    ;‚îò—Ö–æ–¥—è—â–∞—è
    965
    966	    2829  E8 0093		      call  PresentTest	    ;–ø—Ä–æ–≤–µ—Ä–∏—Ç—å	–Ω–∞–ª–∏—á–∏–µ –≤ –ø–∞–º—è—Ç–∏
    967
    968	    282C  8A 1E	005D		      mov   BL,DS:[5Dh]	    ;‚îê
    969	    2830  80 E3	DF		      and   BL,11011111b    ;‚îÇ
Turbo Assembler	 Version 4.1	    11/16/22 11:41:21	    Page 18
code.asm



    970	    2833  80 FB	49		      cmp   BL,'I'	    ;‚îÇ—Ä–∞–∑–æ–±—Ä–∞—Ç—å –∫–ª—é—á (–∑–∞–Ω–æ—Å–∏—Ç—Å—è
    971	    2836  74 0E	90 90		      je    Install	    ;‚îÇ–≤ –æ–±–ª–∞—Å—Ç—å FCB1 PSP)
    972	    283A  80 FB	55		      cmp   BL,'U'	    ;‚îÇ
    973	    283D  74 43	90 90		      je    Uninst	    ;‚îò
    974
    975	    2841  E8 FF82		      call  @InfoAbout	    ;–≤—ã–≤–µ—Å—Ç–∏ –∏—Ñ–æ—Ä–º–∞—Ü–∏—é
    976	    2844  EB 66			      jmp   short ToDos	    ;–∏	–≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ DOS
    977								    ;–µ—Å–ª–∏ –∫–ª—é—á –Ω–µ —Ç–æ—Ç
    978	    2846			    Install:
    979	    2846  BA 15A4r		      lea   DX,AlreadyMsg
    980	    2849  2E: 80 3E 14CFr 01	      cmp   InstFlag,On	    ;‚îê–µ—Å–ª–∏ —É–∂–µ	—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ ,—Ç–æ
    981	    284F  74 57	90 90		      je    Output	    ;‚îò–ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≤—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è
    982
    983	    2853  33 C0			      xor   AX,AX	    ;‚îê–∏–Ω–∞—á–µ –ø–æ–ª—É—á–∏—Ç—å –Ω–∞—á–∞–ª–æ
    984	    2855  8E C0			      mov   ES,AX	    ;‚îÇ–≤–∏–¥–µ–æ –æ–±–ª–∞—Å—Ç–∏ : –µ—Å–ª–∏ –≤	–±–∞–π—Ç–µ –ø–æ
    985	    2857  26: A0 0411		      mov   AL,ES:[411h]    ;‚îÇ–∞–¥—Ä–µ—Å—É 0000h:0411h —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
    986	    285B  24 30			      and   AL,30h	    ;‚îÇ3-–π –±–∏—Ç,—Ç–æ —Å–µ–≥–º–µ–Ω—Ç–Ω—ã–π –∞–¥—Ä–µ—Å  -
    987	    285D  3C 30			      cmp   AL,30h	    ;‚îÇ–Ω–∞—á–∞–ª–∞ –≤–∏–¥–µ–æ	–æ–±–ª–∞—Å—Ç–∏ 0B000h –∏–Ω–∞—á–µ
    988	    285F  75 09	90 90		      jne   Vid1	    ;‚îÇ—Å–µ–≥–º–µ–Ω—Ç–Ω—ã–π –∞–¥—Ä–µ—Å	—Ä–∞–≤–µ–Ω 0B800h
    989	    2863  2E: C7 06 1349r B000	      mov   VideoBeg,0B000h ;‚îò
    990
    991	    286A			    Vid1:
    992	    286A  E8 006A		      call  GrabIntVec	    ;–∑–∞—Ö–≤–∞—Ç–∏—Ç—å	–Ω—É–∂–Ω—ã–µ –≤–µ–∫—Ç–æ—Ä–∞
    993
    994	    286D  A1 002C		      mov   AX,DS:[2Ch]	    ;‚îê–æ—Å–≤–æ–±–æ–¥–∏—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ,–≤—ã–¥–µ–ª–µ-
    995	    2870  8E C0			      mov   ES,AX	    ;‚îÇ–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–µ –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è
    996	    2872  B4 49			      mov   AH,49h	    ;‚îÇ–∑–∞–Ω–∏–º–∞–µ–º–æ–π –≤	—Ä–µ–∑–∏–¥–µ–Ω—Ç–µ –ø–∞–º—è—Ç–∏
    997	    2874  CD 21			      int   21h		    ;‚îò
    998
    999	    2876  B4 09			      mov   AH,09h	    ;‚îê–≤—ã–≤–µ—Å—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å—Ç–∞–Ω–æ–≤–∫–µ
   1000	    2878  BA 1525r		      lea   DX,InstMsg	    ;‚îÇ–≤ —Ä–µ–∑–∏–¥–µ–Ω—Ç
   1001	    287B  CD 21			      int   21h		    ;‚îò
   1002
   1003	    287D  BA 14CEr		      lea   DX,ResEnd	    ;‚îê–∑–∞–≤–µ—Ä—à–∏—Ç—å –∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º-
   1004	    2880  CD 27			      int   27h		    ;‚îò–º—É –≤	—Ä–µ–∑–∏–¥–µ–Ω—Ç–µ
   1005
   1006	    2882			    Uninst:
   1007	    2882  BA 160Br		      lea   DX,NotInstMsg   ;‚îê–µ—Å–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞,
   1008	    2885  2E: 80 3E 14CFr 00	      cmp   InstFlag,Off    ;‚îÇ—Ç–æ –≤—ã–≤–µ—Å—Ç–∏ —Å–æ–æ–±—â–µ–∏–µ –æ–± —ç—Ç–æ–º
   1009	    288B  74 1B	90 90		      je    Output	    ;‚îò
   1010
   1011	    288F  BA 163Dr		      lea   DX,NotSafeMsg   ;‚îê–µ—Å–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º—É –Ω–µ–≤–æ–∑–º–æ–∂–æ
   1012	    2892  E8 0071		      call  TestIntVec	    ;‚îÇ—Å–Ω—è—Ç—å —Å —Ä–µ–∑–∏–¥–µ–Ω—Ç–∞, —Ç–æ –≤—ã–≤–µ—Å—Ç–∏
   1013	    2895  72 11	90 90		      jc    Output	    ;‚îò—Å–æ–æ–±—â–µ–Ω–∏–µ –æ–±	—ç—Ç–æ–º
   1014
   1015	    2899  E8 0091		      call  FreeIntVec	    ;–æ—Å–≤–æ–±–æ–¥–∏—Ç—å –≤–µ–∫—Ç–æ—Ä–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π
   1016
   1017	    289C  B4 49			      mov   AH,49h	    ;‚îê–æ—Å–≤–æ–±–æ–¥–∏—Ç—å –ø–∞–º—è—Ç—å,–∑–∞–Ω–∏–º–∞–µ–º—É—é
   1018	    289E  2E: 8E 06 14D0r	      mov   ES,SaveCS	    ;‚îÇ—Ä–µ–∑–∏–¥–µ–Ω—Ç–Ω–æ–π —á–∞—Å—Ç—å—é –ø—Ä–æ–≥—Ä–∞–º–º—ã
   1019	    28A3  CD 21			      int   21h		    ;‚îò
   1020
   1021	    28A5  BA 15D3r		      lea   DX,UninstMsg
   1022
   1023	    28A8			    Output:
   1024	    28A8  B4 09				  mov	AH,09h		;‚îê–≤—ã–≤–µ—Å—Ç–∏ –Ω—É–∂–Ω–æ–µ	—Å–æ–æ–±—â–µ–Ω–∏–µ
   1025	    28AA  CD 21			      int   21h		    ;‚îò
   1026
Turbo Assembler	 Version 4.1	    11/16/22 11:41:21	    Page 19
code.asm



   1027	    28AC			    ToDos:
   1028	    28AC  B8 4C00			  mov	AX,4C00h	;‚îê–≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ DOS —Å –∫–æ–¥–æ–º
   1029	    28AF  CD 21			      int   21h		    ;‚îò–∑–∞–≤–µ—Ä—à–µ–Ω–∏—è 0
   1030	    28B1  C3			      ret		    ;–≤–æ–∑–≤—Ä–∞—Ç
   1031	    28B2			  InitProc endp
   1032
   1033					  ;–ü–†–û–¶–ï–î–£–†–ê –ü–†–û–í–ï–†–ö–ò –í–ï–†–°–ò–ò DOS
   1034					  ;–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç	—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ñ–ª–∞–≥ –ø–µ—Ä–µ–æ—Å–∞,–µ—Å–ª–∏
   1035					  ;–≤–µ—Ä—Å–∏—è	DOS –º–µ–Ω—å—à–µ –∑–∞–¥–∞–Ω–Ω–æ–π –≤ MinDosVer
   1036
   1037	    28B2			  ChkDosVer proc
   1038	    28B2  B4 30				  mov	AH,30h	       ;‚îê–ø–æ–ª—É—á–∏—Ç—å –≤ AX –Ω–æ–º–µ—Ä –≤–µ—Ä—Å–∏–∏
   1039	    28B4  CD 21			      int   21h		   ;‚îòDOS
   1040	    28B6  3C 02			      cmp   AL,MinDosVer   ;—Å—Ä–∞–≤–Ω–∏—Ç—å –µ–µ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π
   1041
   1042	    28B8  F8			      clc		   ;—Å–±—Ä–æ—Å–∏—Ç—å —Ñ–ª –≥ –ø–µ—Ä–µ–æ—Å  (CF)
   1043	    28B9  7D 03	90 90		      jge   Norma	   ;–µ—Å–ª–∏ –≤–µ—Ä—Å–∏—è –ø–æ–¥—Ö–æ–¥—è—â–∞—è
   1044	    28BD  F9			      stc		   ;–∏–Ω–∞—á–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–ª–∞–≥ –ø–µ—Ä–µ–æ—Å–∞
   1045
   1046	    28BE			    Norma:
   1047	    28BE  C3			      ret  ;–≤–æ–∑–≤—Ä–∞—Ç
   1048	    28BF			  ChkDosVer endp
   1049
   1050					 ;–ü–†–û–¶–ï–î–£–†–ê –û–ü–†–ï–î–ï–õ–ï–ù–ò–Ø –ù–ê–õ–ò–ß–ò–Ø –ü–†–û–ì–†–ê–ú–ú–´ –í –ü–ê–ú–Ø–¢–ò
   1051
   1052	    28BF			  PresentTest proc
   1053	    28BF  2E: C6 06 14CFr 00	      mov   InstFlag,Off   ;—Å–±—Ä–æ—Å–∏—Ç—å —Ñ–ª–∞–≥ –Ω–∞–ª–∏—á–∏—è –≤	—Ä–µ–∑–∏–¥–µ–Ω—Ç–µ
   1054	    28C5  B4 EE			      mov   AH,FuncNum	   ;‚îê–æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –Ω–∞—à–µ–º—É –ø—Ä–æ—Ü–µ—Å—Å—É
   1055	    28C7  CD 16			      int   16h		   ;‚îò
   1056	    28C9  3D 2D0C		      cmp   AX,CodeOut	   ;–ø–æ–ª—É—á–∏–ª–∏ –æ—Ç–≤–µ—Ç?
   1057	    28CC  75 08	90 90		      jne   Return	   ;–µ—Å–ª–∏ –Ω–µ—Ç,—Ç–æ –∫–æ–Ω–µ—Ü
   1058	    28D0  2E: C6 06 14CFr 01	      mov   InstFlag,On	   ;–∏–Ω–∞—á–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–ª–∞–≥ –Ω–∞–ª–∏—á–∏—è
   1059	    28D6			    Return:
   1060	    28D6  C3			      ret		   ;–≤–æ–∑–≤—Ä–∞—Ç
   1061	    28D7			  PresentTest endp
   1062
   1063					 ;–ü–†–û–¶–ï–î–£–†–ê –ó–ê–•–í–ê–¢–ê –í–ï–ö–¢–û–†–û–í –ü–†–ï–†–´–í–ê–ù–ò–ô
   1064
   1065	    28D7			  GrabIntVec proc
   1066	    28D7  B8 3509		      mov   AX,3509h	   ;‚îê—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –ø–µ—Ä–µ-
   1067	    28DA  CD 21			      int   21h		   ;‚îÇ–º–µ–Ω–Ω—ã—Ö —Å—Ç–∞—Ä—ã–π –≤–µ–∫—Ç–æ—Ä –ø—Ä–µ—Ä—ã–≤–∞-
   1068	    28DC  2E: 89 1E 0103r	      mov   OfsInt09,BX	   ;‚îÇ–Ω–∏—è Int09h
   1069	    28E1  2E: 8C 06 0105r	      mov   SegInt09,ES	   ;‚îò
   1070
   1071	    28E6  B8 3516		      mov   AX,3516h	   ;‚îê—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –ø–µ—Ä–µ-
   1072	    28E9  CD 21			      int   21h		   ;‚îÇ–º–µ–Ω–Ω—ã—Ö —Å—Ç–∞—Ä—ã–π –≤–µ–∫—Ç–æ—Ä –ø—Ä–µ—Ä—ã–≤–∞-
   1073	    28EB  2E: 89 1E 0107r	      mov   OfsInt16,BX	   ;‚îÇ–Ω–∏—è Int16h
   1074	    28F0  2E: 8C 06 0109r	      mov   SegInt16,ES	   ;‚îò
   1075
   1076	    28F5  B8 2509		      mov   AX,2509h	   ;‚îê—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Int09Hand –≤ –∫–∞—á–µ—Å—Ç–≤–µ
   1077	    28F8  BA 1376r		      lea   DX,Int09Hand   ;‚îÇ–Ω–æ–≤–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞  –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è
   1078	    28FB  CD 21			      int   21h		   ;‚îòInt09
   1079
   1080	    28FD  B8 2516		      mov   AX,2516h	   ;‚îê—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Presense –≤	–∫–∞—á–µ—Å—Ç–≤–µ
   1081	    2900  BA 14BEr		      lea   DX,Presense	   ;‚îÇ–Ω–æ–≤–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞  –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è
   1082	    2903  CD 21			      int   21h		   ;‚îòInt16h
   1083	    2905  C3			      ret
Turbo Assembler	 Version 4.1	    11/16/22 11:41:21	    Page 20
code.asm



   1084	    2906			  GrabIntVec endp
   1085
   1086					  ;–ü–†–û–¶–ï–î–£–†–ê –ü–†–û–í–ï–†–ö–ò –ü–ï–†–ï–•–í–ê–¢–ê –í–ï–ö–¢–û–†–û–í		    +
   1087					 –ü–†–ï–†–´–í–ê–ù–ò–ô
   1088					  ;–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç	—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ñ–ª–∞–≥ –ø–µ—Ä–µ–Ω–æ—Å–∞ –≤	—Å–ª—É—á–∞–µ+
   1089					 –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞
   1090					  ;—Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–≥–æ –≤–µ–∫—Ç–æ—Ä–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è
   1091
   1092	    2906			  TestIntVec proc
   1093	    2906  B8 3509		      mov   AX,3509h		;‚îê–ø—Ä–æ–≤–µ—Ä–∏—Ç—å,	–Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏	–∫–æ-
   1094	    2909  CD 21			      int   21h			;‚îÇ–¥–æ–≤–æ–µ —Å–ª–æ–≤–æ –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç-
   1095	    290B  26: 81 7F FE 9D0A	      cmp   ES:[BX-2],TestInt09	;‚îò—á–∏–∫–æ–º –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è Int09
*Warning* code.asm(506)	Argument needs type override
   1096	    2911  F9			      stc			;—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–ª–∞–≥ –ø–µ—Ä–µ–Ω–æ—Å–∞	CF,
   1097	    2912  75 18	90 90		      jne   Cant		;–µ—Å–ª–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏–ª–∏
   1098
   1099	    2916  B8 3516		      mov   AX,3516h		;‚îê–ø—Ä–æ–≤–µ—Ä–∏—Ç—å,	—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –∫–æ-
   1100	    2919  CD 21			      int   21h			;‚îÇ–¥–æ–≤–æ–µ —Å–ª–æ–≤–æ –ø–æ—Ä–µ–¥ –æ–±—Ä –±–æ—Ç-
   1101	    291B  26: 81 7F FE 3AFA	      cmp   ES:[BX-2],TestInt16	;‚îò—á–∏–∫–æ–º –ø—Ä–µ—Ä—ã–≤ –∏—è Int16h
*Warning* code.asm(512)	Argument needs type override
   1102	    2921  F9			      stc			;—É—Å—Ç	–æ–≤–∏—Ç—å —Ñ–ª	–≥ –ø–µ—Ä–µ–æ—Å	 CF,
   1103	    2922  75 08	90 90		      jne   Cant		;–µ—Å–ª–∏ –ø—Ä–µ—Ä—ã–≤ –∏–µ –ø–µ—Ä–µ—Ö–≤ —Ç–∏–ª–∏
   1104
   1105	    2926  2E: 8C 06 14D0r	      mov   SaveCS,ES		;–∑–∞–ø–æ–º–Ω–∏—Ç—å CS —Ä–µ–∑–∏–¥–µ–Ω—Ç–Ω–æ–π
   1106	    292B  F8			      clc			;–ø—Ä–æ–≥—Ä–∞–º–º—ã,—Å–±—Ä–æ—Å–∏—Ç—å —Ñ–ª–∞–≥
   1107									;–ø–µ—Ä–µ–Ω–æ—Å
   1108	    292C			    Cant:
   1109	    292C  C3			      ret			;–≤–æ–∑–≤—Ä–∞—Ç
   1110	    292D			  TestIntVec endp
   1111
   1112					 ;–ü–†–û–¶–ï–î–£–†–ê –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–Ø –ó–ê–•–í–ê–ß–ï–ù–ù–´–• –í–ï–ö–¢–û–†–û–í   +
   1113					 –ü–†–ï–†–´–í–ê–ù–ò–ô
   1114
   1115	    292D			  FreeIntVec proc
   1116	    292D  1E			      push  DS		   ;—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å DS
   1117
   1118	    292E  B8 2509		      mov   AX,2509h	   ;‚îê–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å	–≤–µ–∫—Ç–æ—Ä –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è
   1119	    2931  26: 8E 1E 0105r	      mov   DS,ES:SegInt09 ;‚îÇInt09h –∏–∑ –≤—É—Ç—Ä–µ–Ω–Ω–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
   1120	    2936  26: 8B 16 0103r	      mov   DX,ES:OfsInt09 ;‚îÇ—Ä–µ–∑–∏–¥–µ–Ω—Ç–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã
   1121	    293B  CD 21			      int   21h		   ;‚îò
   1122
   1123	    293D  B8 2516		      mov   AX,2516h	   ;‚îê–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å	–≤–µ–∫—Ç–æ—Ä –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è
   1124	    2940  26: 8E 1E 0109r	      mov   DS,ES:SegInt16 ;‚îÇInt16h –∏–∑ –≤—É—Ç—Ä–µ–Ω–Ω–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
   1125	    2945  26: 8B 16 0107r	      mov   DX,ES:OfsInt16 ;‚îÇ—Ä–µ–∑–∏–¥–µ–Ω—Ç–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã
   1126	    294A  CD 21			      int   21h		   ;‚îò
   1127
   1128	    294C  1F			      pop   DS		   ;–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å DS
   1129	    294D  C3			      ret		   ;–≤–æ–∑–≤—Ä–∞—Ç
   1130	    294E			  FreeIntVec endp
   1131
   1132	    294E			  PROGRAM   ends
   1133						    end	  Start
Turbo Assembler	 Version 4.1	    11/16/22 11:41:21	    Page 21
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "11/16/22"
??FILENAME			  Text	 "code	  "
??TIME				  Text	 "11:41:21"
??VERSION			  Number 040A
@ATTR1				  Byte	 PROGRAM:16BB
@ATTR2				  Byte	 PROGRAM:199F
@BEEPSOUND			  Near	 PROGRAM:279E
@BOTROW				  Number 0016
@CPU				  Text	 0F0FH
@CURSEG				  Text	 PROGRAM
@ENDTST				  Near	 PROGRAM:2753
@FILENAME			  Text	 CODE
@INFOABOUT			  Near	 PROGRAM:27C6
@KEY				  Near	 PROGRAM:2808
@L1BEEP				  Near	 PROGRAM:27AB
@L1DRAW				  Near	 PROGRAM:26D2
@L2BEEP				  Near	 PROGRAM:27B2
@L2DRAW				  Near	 PROGRAM:26DF
@L3BEEP				  Near	 PROGRAM:27BD
@LEFTCOL			  Number 0003
@LOCKERINFO			  Byte	 PROGRAM:2061
@MAXPEL				  Near	 PROGRAM:2791
@MSGADDRES			  Word	 PROGRAM:16B3
@NEXT				  Near	 PROGRAM:27F6
@NEXTPELR			  Near	 PROGRAM:2761
@NEXTPELW			  Near	 PROGRAM:277E
@NOTMDA				  Near	 PROGRAM:272B
@NOTVGA				  Near	 PROGRAM:27E7
@OUTPEL				  Near	 PROGRAM:2799
@PAGEOFS			  Word	 PROGRAM:16B8
@PAUSA				  Near	 PROGRAM:2801
@PELREGMAS			  Byte	 PROGRAM:1D61
@READPELREG			  Near	 PROGRAM:2754
@RIGHTCOL			  Number 004C
@SAVEREGIME			  Byte	 PROGRAM:16BA
@SCRBUFSEG			  Word	 PROGRAM:16B6
@TESTVIDEO			  Near	 PROGRAM:2700
@TOPROW				  Number 0001
@VERT				  Near	 PROGRAM:2770
@VGAFLAG			  Byte	 PROGRAM:16B5
@WORDSIZE			  Text	 4
@WRITEINFO			  Near	 PROGRAM:26BD
@WRITEPELREG			  Near	 PROGRAM:2769
ALREADYMSG			  Byte	 PROGRAM:15A4
ATTRBUF				  Byte	 PROGRAM:0B49
BELL				  Number 0007
CANT				  Near	 PROGRAM:292C
CHKDOSVER			  Near	 PROGRAM:28B2
CODEOUT				  Number 2D0C
CONT				  Near	 PROGRAM:139A
COPYRIGHT			  Byte	 PROGRAM:14D2
CR				  Number 000D
CURSIZE				  Word	 PROGRAM:134D
D1				  Near	 PROGRAM:13E2
Turbo Assembler	 Version 4.1	    11/16/22 11:41:21	    Page 22
Symbol Table



D2				  Near	 PROGRAM:13EC
DRAW				  Near	 PROGRAM:1363
EXIT009				  Near	 PROGRAM:148A
EXIT09				  Near	 PROGRAM:14AF
EXIT_09				  Near	 PROGRAM:1397
FREEINTVEC			  Near	 PROGRAM:292D
FUNCNUM				  Number 00EE
GRABINTVEC			  Near	 PROGRAM:28D7
I1				  Near	 PROGRAM:140E
I2				  Near	 PROGRAM:141C
INITPROC			  Near	 PROGRAM:2818
INSTALL				  Near	 PROGRAM:2846
INSTFLAG			  Byte	 PROGRAM:14CF
INSTMSG				  Byte	 PROGRAM:1525
INT09HAND			  Near	 PROGRAM:1376
INTEXT				  Near	 PROGRAM:13B3
KONEC				  Near	 PROGRAM:146E
LF				  Number 000A
LOCKER				  Number 0000
M1				  Near	 PROGRAM:13F6
M2				  Near	 PROGRAM:1404
MINDOSVER			  Number 0002
NORMA				  Near	 PROGRAM:28BE
NOTINSTMSG			  Byte	 PROGRAM:160B
NOTSAFEMSG			  Byte	 PROGRAM:163D
OFF				  Number 0000
OFSINT09			  Word	 PROGRAM:0103
OFSINT16			  Word	 PROGRAM:0107
OK_TEXT				  Byte	 PROGRAM:010B
OLDINT09			  Dword	 PROGRAM:0103
OLDINT16			  Dword	 PROGRAM:0107
ON				  Number 0001
OUTPUT				  Near	 PROGRAM:28A8
PASS				  Near	 PROGRAM:14C9
PRESENSE			  Near	 PROGRAM:14BE
PRESENTTEST			  Near	 PROGRAM:28BF
R1				  Near	 PROGRAM:143E
R2				  Near	 PROGRAM:144C
RESEND				  Byte	 PROGRAM:14CE
RETURN				  Near	 PROGRAM:28D6
SAVECS				  Word	 PROGRAM:14D0
SEGINT09			  Word	 PROGRAM:0105
SEGINT16			  Word	 PROGRAM:0109
SIGN				  Byte	 PROGRAM:010C
START				  Near	 PROGRAM:0100
SWLOOP1				  Near	 PROGRAM:13E2
T1				  Near	 PROGRAM:1426
T2				  Near	 PROGRAM:1434
TESTINT09			  Number 9D0A
TESTINT16			  Number 3AFA
TESTINTVEC			  Near	 PROGRAM:2906
TODOS				  Near	 PROGRAM:28AC
UNINST				  Near	 PROGRAM:2882
UNINSTMSG			  Byte	 PROGRAM:15D3
VERDOSMSG			  Byte	 PROGRAM:1505
VID1				  Near	 PROGRAM:286A
VIDEOBEG			  Word	 PROGRAM:1349
Turbo Assembler	 Version 4.1	    11/16/22 11:41:21	    Page 23
Symbol Table



VIDEOBUF			  Byte	 PROGRAM:010D
VIDEOLEN			  Number 0800
VIDEOOFFS			  Word	 PROGRAM:134B
VIDEOXCG			  Near	 PROGRAM:134F
Y1				  Near	 PROGRAM:1456
Y2				  Near	 PROGRAM:1464

Groups & Segments		  Bit Size Align  Combine Class

PROGRAM				  16  294E Para	  none
Turbo Assembler	 Version 4.1	    11/16/22 11:41:21	    Page 24
Error Summary



*Warning* code.asm(506)	Argument needs type override
*Warning* code.asm(512)	Argument needs type override
